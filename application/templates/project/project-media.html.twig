{% extends "base.html.twig" %}
{% block stylesheets %}
{{parent()}}
<link rel="stylesheet" href="{{ asset('build/css/project-media.css') }}">
{% endblock %}

{% block body %}
  <div class="row">
    <div class="col-lg-12 col-sm-12">
      <h4><a href="{{ path("project_display", {'id': project.id} )}}">{{project.name}}</a> - {{'project_media_title' | trans}}</h4>
      <hr/>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-12 col-sm-12">
        <div class="alert alert-info">{{'max_file_uploads_message' | trans}} - {{fileLimit}}</div>
        {{ form_start(form) }}
          {{ form_row(form.files) }}
          {{ form_row(form.save) }}
        {{ form_end(form) }}
      <hr/>
    </div>
  </div>
  <div class="d-flex align-content-stretch justify-content-center flex-wrap">
    {% for media in project.medias %}
      <div class="p2 d-flex flex-column align-self-center image-container">
        <div class="p2">
          <span class="badge badge-info">{{media.transcription and media.transcription.status ? media.transcription.status.name | trans({}, 'fixtures') : 'transcription_status_none' | trans({}, 'fixtures')}}</span>
          <hr/>
        </div>
        <div class="p2 d-flex align-self-center">
            <img class="project-image" src="{{asset('project_files/' ~ project.name ~ '/' ~ media.url)}}" alt=""></img>
            <div class="p2 d-flex flex-column">
              {% if not media.transcription or media.transcription.status.name == constant('App\\Service\\AppEnums::TRANSKEY_TRANSCRIPTION_STATUS_NONE') or  media.transcription.status.name == constant('App\\Service\\AppEnums::TRANSKEY_TRANSCRIPTION_STATUS_IN_PROGRESS') %}
                <a href="{{path('media_transcription_display', {'id': media.id})}}" class="btn btn-link"><i class="fas fa-pencil-alt"></i></a>
              {% elseif media.transcription and media.transcription.status.name == constant('App\\Service\\AppEnums::TRANSKEY_TRANSCRIPTION_STATUS_IN_REREAD') %}
                <a href="#" class="btn btn-link"><i class="fas fa-edit"></i></a>
              {% endif %}
              <button type="button" data-id="{{media.id}}" role="button" class="btn btn-link delete-image"><i class="fas fa-trash"></i></button>
            </div>

        </div>
      </div>
    {% endfor %}
    {% if project.medias | length == 0 %}
      <h5>{{'project_media_no_media' | trans}}</h5>
    {% endif %}
  </div>


  {# delete project media confirm modal #}
  <div class="modal fade delete-project-media-confirm-modal" id="delete-project-media-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">{{'confirm_title'| trans}}</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <h6>{{'confirm_delete_project_media' | trans}}</h6>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-action="cancel" data-dismiss="modal">{{'cancel' | trans}}</button>
          <button type="button" data-action="confirm" data-dismiss="modal" class="btn btn-danger delete-media-confirm-button">{{'confirm' | trans}}</button>
        </div>
      </div>
    </div>
  </div>

{% endblock %}

{% block javascripts %}
  {{ parent() }}
  <script src="{{ asset('build/js/project-media.js') }}"></script>
{% endblock %}
