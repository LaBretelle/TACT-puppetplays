{% extends "base.html.twig" %}

{% block body %}
<h3>
  <a href="{{ path("project_display", {'id': project.id} )}}">{{ project.name }}</a>
  - {{ "project_handle_user_statuses"|trans }}
</h3>
<table class="table  table-striped">
  <thead>
    <tr>
      <th scope="col">{{ "username"| trans }}</th>
      <th scope="col">{{ "status"| trans }}</th>
      <th scope="col">{{ "project_enabled"| trans }}</th>
      <th scope="col">{{ "actions"| trans }}</th>
    </tr>
  </thead>
  <tbody>
    {% for userStatus in project.userStatuses %}
    <tr>
      <td>{{ userStatus.user.username }}</td>
      <td>{{ userStatus.status.name | trans }}</td>
      <td>{{ userStatus.enabled ? "yes"|trans : "no"|trans }}</td>
      <td>
        <a href="#" type="button" class="btn btn-secondary edit-status" data-status-id="{{ userStatus.id}}">
          {{ "status_edit" | trans}}
        </a>
        <a href="{{ path("status_remove", {id: userStatus.id})}}" type="button" class="btn btn-secondary">
          <i class="fa fa-times" aria-hidden="true"></i>
          {{ "status_remove" | trans}}
        </a>
        <a href="{{ path("status_toggle", {id: userStatus.id})}}" type="button" class="btn btn-secondary">
          {% if userStatus.enabled %}
          <i class="fa fa-toggle-on" aria-hidden="true"></i> {{ "status_toggle_off" | trans}}
          {% else %}
          <i class="fa fa-toggle-off" aria-hidden="true"></i> {{ "status_toggle_on" | trans}}
          {% endif %}
        </a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<div id="status-modal" class="modal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">{{ "status_edit" | trans}}</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div id="status-modal-body" class="modal-body">
      </div>
    </div>
  </div>
</div>
{% endblock %}


{% block javascripts %}
  {{ parent() }}
  <script src="{{ asset('build/js/user-status-form.js') }}"></script>
{% endblock %}
