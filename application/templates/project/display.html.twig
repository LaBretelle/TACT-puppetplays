{% extends "base.html.twig" %}

{% import _self as macros %}

{% block body %}
  {% set userStatus = app.user|status(project) %}

  <h3>{{ project.name }}</h3>
  <p>
    <span class="badge badge-info">
      {% if userStatus %}
        {{ userStatus.status.name }} {{ not userStatus.enabled ? "not_enabled_yet"|trans}}
      {% else %}
        {{"not_registered"|trans}}
      {% endif %}
    </span>
  </p>


  {% if userStatus %}
    {% if (userStatus.enabled and userStatus.status.name == 'user_status_manager_name' | trans({}, 'fixtures')) or is_granted('ROLE_ADMIN') %}
      <a href="{{ path("project_edit", {id: project.id})}}" type="button" class="btn btn-secondary">
        <i class="fas fa-pencil-alt" aria-hidden="true"></i> Editer
      </a>
      <a href="{{ path("project_media", {id: project.id})}}" type="button" class="btn btn-secondary">
        <i class="fas fa-image" aria-hidden="true"></i> {{ "project_manage_media" | trans}}
      </a>
      <a href="{{ path("status_project", {id: project.id})}}" type="button" class="btn btn-secondary">
        <i class="fas fa-users" aria-hidden="true"></i> {{ "project_handle_user_statuses" | trans}}
      </a>
    {% endif %}
  {% elseif app.user %}
    <a href="{{ path("status_request", {id: project.id})}}" type="button" class="btn btn-secondary">
      S'inscrire
    </a>
  {% else %}
    {{ "need_to_be_logged" | trans }}
  {% endif %}

  <hr/>

  <ul class="list-group">
    <li class="list-group-item">{{"project_description"|trans}}: {{ project.description ? project.description | raw : "-"}}</li>
    <li class="list-group-item">{{"project_short_description"|trans}}: {{ project.shortDescription | raw }}</li>
    <li class="list-group-item">{{"project_status"|trans}}: {{ project.status ? project.status.name : "-"}}</li>
    <li class="list-group-item">{{"is_public"|trans}}: {{ project.public ? "yes"|trans : "no"|trans }}</li>
  </ul>
{% endblock %}
